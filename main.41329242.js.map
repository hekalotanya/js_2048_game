{"version":3,"sources":["scripts/main.js"],"names":["startButton","document","querySelector","rows","querySelectorAll","arrayOfCells","score","scoreButton","messageLose","messageWin","i","push","refreshCells","includes","className","row","rowChild","children","j","textContent","valueOfArrayItem","setRandomCells","firstIndex","secondIndex","valuesForRandom","Math","floor","random","randomIndex","length","rotationMatrix","matrix","newMatrix","matrixRow","backRotationMatrix","checkFreeMoveHorizontal","checkFreeMoveVertical","reverseMatrix","arrayCompare","matrix1","matrix2","addEventListener","classList","contains","add","map","toggle","e","copyArrayCells","arrayFlat","flat","wasAdded","keyCode","k"],"mappings":"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","file":"main.41329242.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\n// write your code here\r\nconst startButton = document.querySelector('.button');\r\nconst rows = [...document.querySelectorAll('.field-row')];\r\nlet arrayOfCells = [];\r\nlet score = 0;\r\nconst scoreButton = document.querySelector('.game-score');\r\nconst messageLose = document.querySelector('.message-lose');\r\nconst messageWin = document.querySelector('.message-win');\r\n\r\n// set 0 for all arrayItem\r\nfor (let i = 0; i < 4; i++) {\r\n  arrayOfCells.push([0, 0, 0, 0]);\r\n}\r\n\r\n// refresh table with arrayItem value\r\nfunction refreshCells() {\r\n  if (arrayOfCells.includes(2048)) {\r\n    messageWin.className = 'message message-win';\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    const row = rows[i];\r\n    const rowChild = [...row.children];\r\n\r\n    for (let j = 0; j < 4; j++) {\r\n      if (arrayOfCells[i][j] === 0) {\r\n        rowChild[j].textContent = '';\r\n        rowChild[j].className = 'field-cell';\r\n      } else {\r\n        const valueOfArrayItem = arrayOfCells[i][j];\r\n\r\n        rowChild[j].textContent = valueOfArrayItem;\r\n        rowChild[j].className = `field-cell field-cell--${valueOfArrayItem}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  scoreButton.textContent = score;\r\n}\r\n\r\n// set value for random table item\r\nconst setRandomCells = () => {\r\n  let firstIndex;\r\n  let secondIndex;\r\n  const valuesForRandom = [2, 2, 2, 2, 2, 2, 2, 2, 2, 4];\r\n\r\n  do {\r\n    firstIndex = Math.floor(Math.random() * 4);\r\n    secondIndex = Math.floor(Math.random() * 4);\r\n  } while (arrayOfCells[firstIndex][secondIndex] !== 0);\r\n\r\n  const randomIndex = Math.floor(Math.random() * valuesForRandom.length);\r\n\r\n  arrayOfCells[firstIndex][secondIndex] = valuesForRandom[randomIndex];\r\n};\r\n\r\nconst rotationMatrix = (matrix) => {\r\n  const newMatrix = [];\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    const matrixRow = [];\r\n\r\n    for (let j = 3; j > -1; j--) {\r\n      matrixRow.push(matrix[j][i]);\r\n    }\r\n    newMatrix.push(matrixRow);\r\n  }\r\n\r\n  return newMatrix;\r\n};\r\n\r\nconst backRotationMatrix = (matrix) => {\r\n  const newMatrix = [];\r\n\r\n  for (let i = 3; i > -1; i--) {\r\n    const matrixRow = [];\r\n\r\n    for (let j = 0; j < 4; j++) {\r\n      matrixRow.push(matrix[j][i]);\r\n    }\r\n    newMatrix.push(matrixRow);\r\n  }\r\n\r\n  return newMatrix;\r\n};\r\n\r\nconst checkFreeMoveHorizontal = (matrix) => {\r\n  for (let i = 0; i < 4; i++) {\r\n    for (let j = 0; j < 3; j++) {\r\n      if (matrix[i][j] === matrix[i][j + 1]) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst checkFreeMoveVertical = (matrix) => {\r\n  const reverseMatrix = rotationMatrix(matrix);\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    for (let j = 0; j < 3; j++) {\r\n      if (reverseMatrix[i][j] === reverseMatrix[i][j + 1]) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst arrayCompare = (matrix1, matrix2) => {\r\n  for (let i = 0; i < 4; i++) {\r\n    for (let j = 0; j < 4; j++) {\r\n      if (matrix1[i][j] !== matrix2[i][j]) {\r\n        return false;\r\n      } else {\r\n        continue;\r\n      }\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nstartButton.addEventListener('click', () => {\r\n  if (startButton.classList.contains('restart')) {\r\n    messageLose.classList.add('hidden');\r\n    messageWin.classList.add('hidden');\r\n    score = 0;\r\n\r\n    arrayOfCells.map(row => {\r\n      for (let i = 0; i < row.length; i++) {\r\n        row[i] = 0;\r\n      }\r\n    });\r\n  } else {\r\n    setRandomCells();\r\n    setRandomCells();\r\n  }\r\n\r\n  startButton.classList.toggle('start');\r\n  startButton.classList.toggle('restart');\r\n\r\n  const messageOfstart = document.querySelector('.message-start');\r\n\r\n  messageOfstart.classList.toggle('hidden');\r\n\r\n  if (startButton.classList.contains('start')) {\r\n    startButton.textContent = 'Start';\r\n  } else {\r\n    startButton.textContent = 'Restart';\r\n  }\r\n\r\n  refreshCells();\r\n});\r\n\r\ndocument.addEventListener('keyup', (e) => {\r\n  const copyArrayCells\r\n    = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    for (let j = 0; j < 4; j++) {\r\n      copyArrayCells[i][j] = arrayOfCells[i][j];\r\n    }\r\n  }\r\n\r\n  if (!messageWin.classList.contains('hidden')) {\r\n    return;\r\n  }\r\n\r\n  const arrayFlat = arrayOfCells.flat();\r\n\r\n  if (!arrayFlat.includes(0)) {\r\n    if (checkFreeMoveHorizontal(arrayOfCells) === false\r\n      && checkFreeMoveVertical(arrayOfCells) === false) {\r\n      messageLose.className = 'message message-lose';\r\n    }\r\n  }\r\n\r\n  if (!messageLose.classList.contains('hidden')) {\r\n    return;\r\n  }\r\n\r\n  if (startButton.classList.contains('start')) {\r\n    return;\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    const newMatrix = rotationMatrix(arrayOfCells);\r\n    const wasAdded = [];\r\n\r\n    switch (e.keyCode) {\r\n      case 37:\r\n        if (!arrayFlat.includes(0)) {\r\n          if (checkFreeMoveHorizontal(arrayOfCells) === false) {\r\n            return;\r\n          }\r\n        }\r\n\r\n        for (let j = 1; j < 4; j++) {\r\n          if (arrayOfCells[i][j] === 0 && arrayOfCells[i][j - 1] === 0) {\r\n            continue;\r\n          }\r\n\r\n          if (arrayOfCells[i][j] === 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let k = 0; k < j; k++) {\r\n            if (arrayOfCells[i][k] === 0) {\r\n              arrayOfCells[i][k] = arrayOfCells[i][j];\r\n              arrayOfCells[i][j] = 0;\r\n              j = k;\r\n            }\r\n          }\r\n\r\n          if (arrayOfCells[i][j] === arrayOfCells[i][j - 1]) {\r\n            if (wasAdded.includes([i, j - 1])) {\r\n              continue;\r\n            }\r\n            arrayOfCells[i][j - 1] += arrayOfCells[i][j];\r\n            arrayOfCells[i][j] = 0;\r\n            wasAdded.push([i, j - 1]);\r\n            score += arrayOfCells[i][j - 1];\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      case 39:\r\n        if (!arrayFlat.includes(0)) {\r\n          if (checkFreeMoveHorizontal(arrayOfCells) === false) {\r\n            return;\r\n          }\r\n        }\r\n\r\n        for (let j = 2; j > -1; j--) {\r\n          if (arrayOfCells[i][j] === 0 && arrayOfCells[i][j + 1] === 0) {\r\n            continue;\r\n          }\r\n\r\n          if (arrayOfCells[i][j] === 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let k = 3; k > j; k--) {\r\n            if (arrayOfCells[i][k] === 0) {\r\n              arrayOfCells[i][k] = arrayOfCells[i][j];\r\n              arrayOfCells[i][j] = 0;\r\n              j = k;\r\n            }\r\n          }\r\n\r\n          if (arrayOfCells[i][j] === arrayOfCells[i][j + 1]) {\r\n            arrayOfCells[i][j + 1] += arrayOfCells[i][j];\r\n            arrayOfCells[i][j] = 0;\r\n            score += arrayOfCells[i][j + 1];\r\n            continue;\r\n          }\r\n        }\r\n        break;\r\n\r\n      case 38:\r\n        if (!arrayFlat.includes(0)) {\r\n          if (checkFreeMoveVertical(arrayOfCells) === false) {\r\n            return;\r\n          }\r\n        }\r\n\r\n        if (checkFreeMoveVertical(arrayOfCells) === false) {\r\n          return;\r\n        }\r\n\r\n        for (let j = 2; j > -1; j--) {\r\n          if (newMatrix[i][j] === 0 && newMatrix[i][j + 1] === 0) {\r\n            continue;\r\n          }\r\n\r\n          if (newMatrix[i][j] === 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let k = 3; k > j; k--) {\r\n            if (newMatrix[i][k] === 0) {\r\n              newMatrix[i][k] = newMatrix[i][j];\r\n              newMatrix[i][j] = 0;\r\n              j = k;\r\n            }\r\n          }\r\n\r\n          if (newMatrix[i][j] === newMatrix[i][j + 1]) {\r\n            newMatrix[i][j + 1] += newMatrix[i][j];\r\n            newMatrix[i][j] = 0;\r\n            score += newMatrix[i][j + 1];\r\n            continue;\r\n          }\r\n        }\r\n\r\n        arrayOfCells = backRotationMatrix(newMatrix);\r\n\r\n        break;\r\n\r\n      case 40:\r\n        if (!arrayFlat.includes(0)) {\r\n          if (checkFreeMoveVertical(arrayOfCells) === false) {\r\n            return;\r\n          }\r\n        }\r\n\r\n        for (let j = 1; j < 4; j++) {\r\n          if (newMatrix[i][j] === 0 && newMatrix[i][j - 1] === 0) {\r\n            continue;\r\n          }\r\n\r\n          if (newMatrix[i][j] === 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let k = 0; k < j; k++) {\r\n            if (newMatrix[i][k] === 0) {\r\n              newMatrix[i][k] = newMatrix[i][j];\r\n              newMatrix[i][j] = 0;\r\n              j = k;\r\n            }\r\n          }\r\n\r\n          if (newMatrix[i][j] === newMatrix[i][j - 1]) {\r\n            if (wasAdded.includes([i, j - 1])) {\r\n              continue;\r\n            }\r\n            newMatrix[i][j - 1] += newMatrix[i][j];\r\n            newMatrix[i][j] = 0;\r\n            wasAdded.push([i, j - 1]);\r\n            score += newMatrix[i][j - 1];\r\n          }\r\n        }\r\n        arrayOfCells = backRotationMatrix(newMatrix);\r\n\r\n        break;\r\n    }\r\n  }\r\n  refreshCells();\r\n\r\n  if (arrayCompare(copyArrayCells, arrayOfCells) === true) {\r\n    return;\r\n  }\r\n\r\n  setRandomCells();\r\n  refreshCells();\r\n});\r\n"]}